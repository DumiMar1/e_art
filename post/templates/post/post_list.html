{% extends 'users/base.html' %}
{% block title %} Hello {% endblock %}

{% block content %}
<div class="filter" style="margin-top:50px;">
    <form action="{% url 'post:explore' %}">
        <span style="color:white;">Sort by:</span>
        <select name="sort">
          <option value="a_z">title(A-Z)</option>
          <option value="z_a">title(Z-A)</option>
          <option value="price_low">price(min-max)</option>
          <option value="price_high">price(max-min)</option>
          <option value="date_old">published-date(olrder-)</option>
          <option value="date_new">published-date(newest)</option>
          <input type="submit" value="Sort">
        </select>
      </form>
</div>
        <div class="grid-container infinite-container">
            {% for post in posts %}
                <div class="grid-item infinite-item">
                    <a href="{% url 'post:post-view' pk=post.pk %}"><img src="{{ post.image.url }}" class="card-img-top "></a>
                    
                    <div class="middle-top">
                        <div class="price"><p>${{post.price}}</p></div>
                    </div>
                    <div class="middle">
                        <div class="logo"><img src="{{post.user.profile.avatar.url}}" class="avatar" width="50px"></div>
                        <div class="user-name"><p>{{ post.user.username}}</p></div>
                        <div class="text"><p>{{ post.title }}</p></div>
                        
                    </div>
                </div>
                    {% endfor %}
                </div>
                {% if posts.has_next %}
                <a class="infinite-more-link" href="?page={{ posts.next_page_number }}"></a>
                {% endif %}
                <div class="d-flex justify-content-center" style="display:none;">
                    <div class="spinner-border" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>

            </div>

    <script src="/static/js/jquery-3.6.1.min.js"></script>
    <script src="/static/js/jquery.waypoints.min.js"></script>
    <script src="/static/js/infinite.min.js"></script>
    <script>
        var infinite = new Waypoint.Infinite({
            element: $('.infinite-container')[0],
            handler: function(direction) {

        },
        offset: 'bottom-in-view',

        onBeforePageLoad: function () {
        $('.spinner-border').show();
        console.log('i`m working')
        },
        onAfterPageLoad: function () {
        $('.spinner-border').hide();
        }

        });

    </script>
     
{% endblock %}

